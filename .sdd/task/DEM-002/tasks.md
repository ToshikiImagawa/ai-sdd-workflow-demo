# DEM-002: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¢ãƒ‰ã‚ªãƒ³åŒ–

**é–¢é€£è¨­è¨ˆæ›¸**: [visual-addon_design.md](../../specification/visual-addon_design.md)
**é–¢é€£ä»•æ§˜æ›¸**: [visual-addon_spec.md](../../specification/visual-addon_spec.md)
**é–¢é€£PRD**: [visual-addon.md](../../requirement/visual-addon.md)

---

## ã‚¿ã‚¹ã‚¯ä¾å­˜é–¢ä¿‚

```mermaid
graph LR
    T1[1. å‹å®šç¾©] --> T3[3. ã‚¢ãƒ‰ã‚ªãƒ³å®šç¾©]
    T2[2. ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•] --> T3
    T3 --> T4[4. ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ]
    T4 --> T5[5. ç™»éŒ²é–¢æ•°]
    T5 --> T6[6. æœ¬ä½“çµ±åˆ]
    T6 --> T7[7. æ—§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤]
    T7 --> T8[8. æ¤œè¨¼]
```

---

## 1. åŸºç›¤ã‚¿ã‚¹ã‚¯

### 1.1. AddonDefinition å‹å®šç¾©ã®ä½œæˆ

**ã‚«ãƒ†ã‚´ãƒª**: åŸºç›¤
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/addons/types.ts`
**ä¾å­˜**: ãªã—

- [ ] `src/addons/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
- [ ] `src/addons/types.ts` ã‚’ä½œæˆ
  - `AddonComponent` å‹ï¼ˆname: string, component: RegisteredComponentï¼‰
  - `AddonDefinition` å‹ï¼ˆname: string, components: AddonComponent[]ï¼‰
  - `RegisteredComponent` ã¯ `ComponentRegistry.tsx` ã‹ã‚‰å‹ã®ã¿ import

**å®Œäº†æ¡ä»¶**: `npx tsc --noEmit` ã§ã‚¨ãƒ©ãƒ¼ãªã—

---

### 1.2. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»å‹•

**ã‚«ãƒ†ã‚´ãƒª**: åŸºç›¤
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/addons/ai-sdd-visuals/`
**ä¾å­˜**: ãªã—

- [ ] `src/addons/ai-sdd-visuals/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
- [ ] ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `src/visuals/` â†’ `src/addons/ai-sdd-visuals/` ã«ç§»å‹•
  - `VibeCodingDemo.tsx` + `VibeCodingDemo.module.css`
  - `HierarchyFlowVisual.tsx` + `HierarchyFlowVisual.module.css`
  - `PersistenceVisual.tsx` + `PersistenceVisual.module.css`
- [ ] å„ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªï¼ˆCSS Modules ã¯ç›¸å¯¾ãƒ‘ã‚¹ã®ãŸã‚å¤‰æ›´ä¸è¦ï¼‰

**å®Œäº†æ¡ä»¶**: ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ–°ã—ã„å ´æ‰€ã«å­˜åœ¨ã—ã€æ—§ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `git mv` ã§ç§»å‹•æ¸ˆã¿

---

## 2. ã‚³ã‚¢ã‚¿ã‚¹ã‚¯

### 2.1. AI-SDD ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¢ãƒ‰ã‚ªãƒ³å®šç¾©ã®ä½œæˆ

**ã‚«ãƒ†ã‚´ãƒª**: ã‚³ã‚¢
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/addons/ai-sdd-visuals/index.ts`
**ä¾å­˜**: 1.1, 1.2

- [ ] `src/addons/ai-sdd-visuals/index.ts` ã‚’ä½œæˆ
  - `AddonDefinition` å‹ã‚’ `../types` ã‹ã‚‰ import
  - 3ã¤ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åŒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ import
  - `aiSddVisualsAddon` ã‚’ `AddonDefinition` ã¨ã—ã¦ export

**å®Œäº†æ¡ä»¶**: `npx tsc --noEmit` ã§ã‚¨ãƒ©ãƒ¼ãªã—

---

### 2.2. æœ‰åŠ¹ã‚¢ãƒ‰ã‚ªãƒ³ä¸€è¦§ã®ä½œæˆ

**ã‚«ãƒ†ã‚´ãƒª**: ã‚³ã‚¢
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/addons/index.ts`
**ä¾å­˜**: 2.1

- [ ] `src/addons/index.ts` ã‚’ä½œæˆ
  - `AddonDefinition` å‹ã‚’ `./types` ã‹ã‚‰ import
  - `aiSddVisualsAddon` ã‚’ `./ai-sdd-visuals` ã‹ã‚‰ import
  - `addons: AddonDefinition[]` é…åˆ—ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**å®Œäº†æ¡ä»¶**: `npx tsc --noEmit` ã§ã‚¨ãƒ©ãƒ¼ãªã—

---

### 2.3. registerAddons é–¢æ•°ã®ä½œæˆ

**ã‚«ãƒ†ã‚´ãƒª**: ã‚³ã‚¢
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/addons/register.ts`
**ä¾å­˜**: 2.2

- [ ] `src/addons/register.ts` ã‚’ä½œæˆ
  - `registerComponent` ã‚’ `../components/ComponentRegistry` ã‹ã‚‰ import
  - `addons` ã‚’ `./index` ã‹ã‚‰ import
  - `registerAddons()` é–¢æ•°ã‚’ exportï¼ˆå…¨ã‚¢ãƒ‰ã‚ªãƒ³ã®å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ registerComponent ã§ç™»éŒ²ï¼‰

**å®Œäº†æ¡ä»¶**: `npx tsc --noEmit` ã§ã‚¨ãƒ©ãƒ¼ãªã—

---

## 3. çµ±åˆã‚¿ã‚¹ã‚¯

### 3.1. æœ¬ä½“ã‚³ãƒ¼ãƒ‰ã¨ã®çµ±åˆ

**ã‚«ãƒ†ã‚´ãƒª**: çµ±åˆ
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/components/registerDefaults.tsx`, `src/App.tsx`
**ä¾å­˜**: 2.3

- [ ] `src/components/registerDefaults.tsx` ã‚’ä¿®æ­£
  - VibeCodingDemo, HierarchyFlowVisual, PersistenceVisual ã® import ã‚’å‰Šé™¤
  - `registerDefaultComponents()` ã‹ã‚‰3ã¤ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã® `registerDefaultComponent` å‘¼ã³å‡ºã—ã‚’å‰Šé™¤
- [ ] `src/App.tsx` ã‚’ä¿®æ­£
  - `registerAddons` ã‚’ `./addons/register` ã‹ã‚‰ import
  - `registerDefaultComponents()` ã®ç›´å¾Œã« `registerAddons()` ã‚’å‘¼ã³å‡ºã—ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰

**å®Œäº†æ¡ä»¶**: `npx tsc --noEmit` ã§ã‚¨ãƒ©ãƒ¼ãªã—

---

### 3.2. æ—§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å‰Šé™¤

**ã‚«ãƒ†ã‚´ãƒª**: çµ±åˆ
**å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `src/visuals/`
**ä¾å­˜**: 3.1

- [ ] `src/visuals/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç©ºã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] `src/visuals/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤

**å®Œäº†æ¡ä»¶**: `src/visuals/` ãŒå­˜åœ¨ã—ãªã„

---

## 4. ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯

### 4.1. å…¨ä½“æ¤œè¨¼

**ã‚«ãƒ†ã‚´ãƒª**: ãƒ†ã‚¹ãƒˆ
**ä¾å­˜**: 3.2

- [ ] `npx tsc --noEmit` â€” å‹ãƒã‚§ãƒƒã‚¯ã§ã‚¨ãƒ©ãƒ¼ 0 ä»¶
- [ ] `npx vitest run` â€” æ—¢å­˜ãƒ†ã‚¹ãƒˆå…¨34ä»¶ãƒ‘ã‚¹
- [ ] `npm run build` â€” ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 0 ä»¶

**å®Œäº†æ¡ä»¶**: ä¸Šè¨˜3ã¤ã®ã‚³ãƒãƒ³ãƒ‰ãŒã™ã¹ã¦æˆåŠŸ

---

## 5. ä»•ä¸Šã’ã‚¿ã‚¹ã‚¯

### 5.1. è¨­è¨ˆæ›¸ã®å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°

**ã‚«ãƒ†ã‚´ãƒª**: ä»•ä¸Šã’
**ä¾å­˜**: 4.1

- [ ] `visual-addon_design.md` ã®å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ ğŸ”´ â†’ ğŸŸ¢ ã«æ›´æ–°
- [ ] å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°

**å®Œäº†æ¡ä»¶**: è¨­è¨ˆæ›¸ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒå®Ÿè£…çŠ¶æ…‹ã‚’åæ˜ ã—ã¦ã„ã‚‹

---

## è¦æ±‚ã‚«ãƒãƒ¬ãƒƒã‚¸

| è¦æ±‚ID   | è¦æ±‚å†…å®¹                                    | å¯¾å¿œã‚¿ã‚¹ã‚¯     |
|:--------|:----------------------------------------|:----------|
| UR-001  | ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦æœ¬ä½“ã‹ã‚‰åˆ†é›¢              | å…¨ã‚¿ã‚¹ã‚¯      |
| FR-001  | AddonDefinition å‹ã§æ§‹é€ ã‚’çµ±ä¸€ã™ã‚‹                 | 1.1, 2.1  |
| FR-002  | ComponentRegistry ã® registerComponent ã§ç™»éŒ²ã™ã‚‹ | 2.3, 3.1  |
| FR-003  | import ã®è¿½åŠ /å‰Šé™¤ã§æœ‰åŠ¹/ç„¡åŠ¹ã‚’ç®¡ç†ã™ã‚‹                  | 2.2       |
| FR-004  | æ—¢å­˜3ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚’ addons/ é…ä¸‹ã«ç§»å‹•ã—ã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦å†æ§‹æˆã™ã‚‹      | 1.2, 2.1  |
| NFR-001 | ã‚¢ãƒ‰ã‚ªãƒ³åŒ–ã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚ºã®å¢—åŠ ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹               | 4.1       |
| NFR-002 | ã‚¢ãƒ‰ã‚ªãƒ³ã®è¿½åŠ ãƒ»å‰Šé™¤ã¯ index.ts ã® import å¤‰æ›´ã®ã¿ã§å®Œçµã™ã‚‹   | 2.2, 3.1  |
| DC-001  | ComponentRegistry ã®ä»•çµ„ã¿ã‚’å¤‰æ›´ã—ãªã„              | 2.3, 3.1  |
| DC-002  | ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºãƒ»å‹•ä½œã«å¤‰æ›´ãŒãªã„ã“ã¨                  | 4.1       |
