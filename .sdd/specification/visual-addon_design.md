# ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¢ãƒ‰ã‚ªãƒ³åŒ–

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¨®åˆ¥:** æŠ€è¡“è¨­è¨ˆæ›¸ (Design Doc)
**SDDãƒ•ã‚§ãƒ¼ã‚º:** Plan (è¨ˆç”»/è¨­è¨ˆ)
**æœ€çµ‚æ›´æ–°æ—¥:** 2026-01-30
**é–¢é€£ Spec:** [visual-addon_spec.md](./visual-addon_spec.md)
**é–¢é€£ PRD:** [visual-addon.md](../requirement/visual-addon.md)

---

# 1. å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸŸ¢ å®Ÿè£…å®Œäº†

## 1.1. å®Ÿè£…é€²æ—

| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«/æ©Ÿèƒ½                        | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å‚™è€ƒ |
|--------------------------------------|----------|------|
| `src/addons/types.ts`                | ğŸŸ¢       |      |
| `src/addons/ai-sdd-visuals/index.ts` | ğŸŸ¢       |      |
| `src/addons/index.ts`                | ğŸŸ¢       |      |
| `src/addons/register.ts`             | ğŸŸ¢       |      |
| ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•                    | ğŸŸ¢       |      |
| `registerDefaults.tsx` ä¿®æ­£           | ğŸŸ¢       |      |
| `App.tsx` ä¿®æ­£                        | ğŸŸ¢       |      |
| `src/visuals/` å‰Šé™¤                   | ğŸŸ¢       |      |

---

# 2. è¨­è¨ˆç›®æ¨™

1. **æœ¬ä½“ã¨ã®åˆ†é›¢**: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦æœ¬ä½“ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ç‹¬ç«‹ã•ã›ã‚‹
2. **æ—¢å­˜å‹•ä½œã®ç¶­æŒ**: ComponentRegistry ã®ä»•çµ„ã¿ã‚’å¤‰æ›´ã›ãšã€è¡¨ç¤ºãƒ»å‹•ä½œã«å½±éŸ¿ã‚’ä¸ãˆãªã„ï¼ˆDC-001, DC-002ï¼‰
3. **ã‚·ãƒ³ãƒ—ãƒ«ãªç®¡ç†**: ã‚¢ãƒ‰ã‚ªãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’ import ã®è¿½åŠ /å‰Šé™¤ã®ã¿ã§åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ã«ã™ã‚‹ï¼ˆFR-003ï¼‰
4. **å‹å®‰å…¨æ€§**: AddonDefinition å‹ã«ã‚ˆã‚‹æ§‹é€ çµ±ä¸€ã§å‹å®‰å…¨ãªã‚¢ãƒ‰ã‚ªãƒ³å®šç¾©ã‚’å®Ÿç¾ã™ã‚‹ï¼ˆT-001ï¼‰

---

# 3. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| é ˜åŸŸ           | æ¡ç”¨æŠ€è¡“                    | é¸å®šç†ç”±                                         |
|---------------|--------------------------|------------------------------------------------|
| å‹å®šç¾©          | TypeScript               | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ—¢å­˜ã®ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆT-001ï¼‰                         |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç™»éŒ² | ComponentRegistry        | æ—¢å­˜ã®ä»•çµ„ã¿ã‚’æ´»ç”¨ã—ã€å¤‰æ›´ã‚’æœ€å°åŒ–ï¼ˆDC-001ï¼‰                   |
| ã‚¹ã‚¿ã‚¤ãƒ«         | CSS Modules              | å„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãŒæ—¢ã« CSS Modules ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ãã®ã¾ã¾ç§»å‹•å¯èƒ½      |

---

# 4. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## 4.1. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```mermaid
graph TD
    App[App.tsx] --> RegDef[registerDefaults.tsx]
    App --> RegAddon[registerAddons]
    RegDef --> Registry[ComponentRegistry]
    RegAddon --> Registry

    subgraph "addons/"
        RegAddon --> AddonIndex[index.ts<br/>æœ‰åŠ¹ã‚¢ãƒ‰ã‚ªãƒ³ä¸€è¦§]
        AddonIndex --> AiSdd[ai-sdd-visuals/<br/>AddonDefinition]
        AiSdd --> VCD[VibeCodingDemo]
        AiSdd --> HFV[HierarchyFlowVisual]
        AiSdd --> PV[PersistenceVisual]
    end

    subgraph "components/"
        RegDef --> TA[TerminalAnimation]
        RegDef --> Icons[MUI Icons]
    end

    Registry --> Slides[SlideRenderer]
```

## 4.2. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²

| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å                       | è²¬å‹™                                           | ä¾å­˜é–¢ä¿‚                          | é…ç½®å ´æ‰€                             |
|----------------------------------|----------------------------------------------|-------------------------------|-------------------------------------|
| `types.ts`                       | AddonDefinition, AddonComponent å‹å®šç¾©           | ComponentRegistryï¼ˆå‹ã®ã¿ï¼‰         | `src/addons/types.ts`               |
| `ai-sdd-visuals/index.ts`        | AI-SDD ãƒ‡ãƒ¢ç”¨ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¢ãƒ‰ã‚ªãƒ³ã®å®šç¾©                      | types.ts, å„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ       | `src/addons/ai-sdd-visuals/index.ts`|
| `index.ts`                       | æœ‰åŠ¹ã‚¢ãƒ‰ã‚ªãƒ³ä¸€è¦§ã®ç®¡ç†                                 | types.ts, å„ã‚¢ãƒ‰ã‚ªãƒ³å®šç¾©              | `src/addons/index.ts`               |
| `register.ts`                    | å…¨ã‚¢ãƒ‰ã‚ªãƒ³ã® ComponentRegistry ã¸ã®ä¸€æ‹¬ç™»éŒ²              | ComponentRegistry, index.ts    | `src/addons/register.ts`            |

## 4.3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ addons/                              # æ–°è¦
â”‚   â”œâ”€â”€ types.ts                         # AddonDefinition å‹
â”‚   â”œâ”€â”€ index.ts                         # æœ‰åŠ¹ã‚¢ãƒ‰ã‚ªãƒ³ä¸€è¦§
â”‚   â”œâ”€â”€ register.ts                      # å…¨ã‚¢ãƒ‰ã‚ªãƒ³ã®ä¸€æ‹¬ç™»éŒ²
â”‚   â””â”€â”€ ai-sdd-visuals/                  # AI-SDD ãƒ‡ãƒ¢ç”¨ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚»ãƒƒãƒˆ
â”‚       â”œâ”€â”€ index.ts                     # ã‚¢ãƒ‰ã‚ªãƒ³å®šç¾©
â”‚       â”œâ”€â”€ VibeCodingDemo.tsx           # src/visuals/ ã‹ã‚‰ç§»å‹•
â”‚       â”œâ”€â”€ VibeCodingDemo.module.css
â”‚       â”œâ”€â”€ HierarchyFlowVisual.tsx
â”‚       â”œâ”€â”€ HierarchyFlowVisual.module.css
â”‚       â”œâ”€â”€ PersistenceVisual.tsx
â”‚       â””â”€â”€ PersistenceVisual.module.css
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ComponentRegistry.tsx            # å¤‰æ›´ãªã—
â”‚   â””â”€â”€ registerDefaults.tsx             # ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«3ã¤ã®ç™»éŒ²ã‚’å‰Šé™¤
```

---

# 5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
import type { RegisteredComponent } from '../components/ComponentRegistry'

/** ã‚¢ãƒ‰ã‚ªãƒ³ãŒæä¾›ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾© */
type AddonComponent = {
  name: string
  component: RegisteredComponent
}

/** ã‚¢ãƒ‰ã‚ªãƒ³å®šç¾© */
type AddonDefinition = {
  name: string
  components: AddonComponent[]
}
```

---

# 6. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©

```typescript
// src/addons/register.ts
import { registerComponent } from '../components/ComponentRegistry'
import { addons } from './index'

/** å…¨ã‚¢ãƒ‰ã‚ªãƒ³ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ ComponentRegistry ã«ç™»éŒ²ã™ã‚‹ */
export function registerAddons(): void {
  for (const addon of addons) {
    for (const { name, component } of addon.components) {
      registerComponent(name, component)
    }
  }
}
```

---

# 7. éæ©Ÿèƒ½è¦ä»¶å®Ÿç¾æ–¹é‡

| è¦ä»¶                     | å®Ÿç¾æ–¹é‡                                          |
|------------------------|------------------------------------------------|
| å‹å®‰å…¨æ€§ï¼ˆT-001ï¼‰           | AddonDefinition å‹ã§æ§‹é€ ã‚’å¼·åˆ¶ã—ã€any å‹ã‚’ä½¿ç”¨ã—ãªã„           |
| è¡¨ç¤ºäº’æ›æ€§ï¼ˆDC-002ï¼‰        | CSS Modules ã‚’ãã®ã¾ã¾ç§»å‹•ã—ã€ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ãªã—                |
| ãƒ“ãƒ«ãƒ‰äº’æ›æ€§                | Vite ã®æ—¢å­˜è¨­å®šã§ CSS Modules ãŒå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª             |
| ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚ºï¼ˆNFR-001ï¼‰      | ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã¨ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆè¿½åŠ ã®ã¿ã§æ–°è¦ãƒ­ã‚¸ãƒƒã‚¯ã‚’æœ€å°åŒ–ã€‚Vite ã® tree-shaking ã«ã‚ˆã‚Šæœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ã¯é™¤å¤–ã•ã‚Œã‚‹ |
| é–‹ç™ºè€…ä½“é¨“ï¼ˆNFR-002ï¼‰        | `src/addons/index.ts` ã®é…åˆ—ã« import ã‚’è¿½åŠ /å‰Šé™¤ã™ã‚‹ã ã‘ã§ã‚¢ãƒ‰ã‚ªãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ã€‚ä»–ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£ä¸è¦ |

---

# 8. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

| ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ« | å¯¾è±¡                           | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ |
|-----------|------------------------------|----------|
| å‹ãƒã‚§ãƒƒã‚¯    | `npx tsc --noEmit`           | ã‚¨ãƒ©ãƒ¼ 0ä»¶   |
| ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | `npx vitest run`ï¼ˆæ—¢å­˜34ä»¶ï¼‰       | å…¨ä»¶ãƒ‘ã‚¹    |
| ãƒ“ãƒ«ãƒ‰      | `npm run build`              | ã‚¨ãƒ©ãƒ¼ 0ä»¶   |
| è¡¨ç¤ºç¢ºèª    | ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ç›®è¦–ç¢ºèª                   | æ—¢å­˜ã¨åŒä¸€    |

---

# 9. è¨­è¨ˆåˆ¤æ–­

## 9.1. æ±ºå®šäº‹é …

| æ±ºå®šäº‹é …                   | é¸æŠè‚¢                                                    | æ±ºå®šå†…å®¹                        | ç†ç”±                                                         |
|------------------------|--------------------------------------------------------|----------------------------|------------------------------------------------------------|
| ã‚¢ãƒ‰ã‚ªãƒ³ç™»éŒ²å…ˆ               | (A) default å´ (B) custom å´                              | (B) custom å´               | ã‚¢ãƒ‰ã‚ªãƒ³ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä¸Šæ›¸ãå¯èƒ½ã§ã‚ã‚‹ã¹ãã€‚å°†æ¥çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® VibeCodingDemo ã‚’åˆ¥ã®å®Ÿè£…ã«å·®ã—æ›¿ãˆã‚‹éš›ã« custom å´ãŒé©åˆ‡ |
| æœ‰åŠ¹/ç„¡åŠ¹ç®¡ç†æ–¹å¼             | (A) è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (B) import è¿½åŠ /å‰Šé™¤ (C) ç’°å¢ƒå¤‰æ•°                    | (B) import è¿½åŠ /å‰Šé™¤            | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ãƒ¼ã‚¹ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¦ã§ã‚·ãƒ³ãƒ—ãƒ«ã€‚TypeScript ã®å‹ãƒã‚§ãƒƒã‚¯ãŒåŠ¹ã          |
| ã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†æ–¹é‡ï¼ˆA-002 å¯¾å¿œï¼‰   | (A) style.css ã«é›†ç´„ (B) ã‚¢ãƒ‰ã‚ªãƒ³å†… CSS Modules ã‚’ç¶­æŒ              | (B) ã‚¢ãƒ‰ã‚ªãƒ³å†… CSS Modules ã‚’ç¶­æŒ   | æ—¢å­˜ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãŒ CSS Modules ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€é›†ç´„ã™ã‚‹ã¨ç§»å‹•ã‚³ã‚¹ãƒˆãŒå¢—å¤§ã€‚ã‚¢ãƒ‰ã‚ªãƒ³ã®ç‹¬ç«‹æ€§ã‚’å„ªå…ˆ  |
| registerAddons ã®å‘¼ã³å‡ºã—å ´æ‰€ | (A) App.tsx ã®é–¢æ•°å†… (B) App.tsx ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚³ãƒ¼ãƒ— (C) main.tsx     | (B) App.tsx ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚³ãƒ¼ãƒ—      | registerDefaultComponents ã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸è¥²ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿æ™‚ã«ä¸€åº¦ã ã‘å®Ÿè¡Œ   |

---

# 10. å¤‰æ›´å±¥æ­´

## v1.1.0 (2026-01-30)

**å¤‰æ›´å†…å®¹:**

- éæ©Ÿèƒ½è¦ä»¶å®Ÿç¾æ–¹é‡ã« NFR-001ï¼ˆãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚ºï¼‰ã€NFR-002ï¼ˆé–‹ç™ºè€…ä½“é¨“ï¼‰ã‚’è¿½åŠ 

## v1.0.0 (2026-01-30)

**å¤‰æ›´å†…å®¹:**

- åˆç‰ˆä½œæˆ
- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¢ãƒ‰ã‚ªãƒ³åŒ–è¨­è¨ˆã‚’å®šç¾©
